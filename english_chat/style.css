/* --- 基本スタイル --- */
:root {
    --line-bg-color: #79acdc;
    --header-bg-color: #f0f2f5;
    --my-bubble-color: #8de041;
    --friend-bubble-color: #ffffff;
    --text-color: #000;
    --input-bg-color: #ffffff;
}

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background-color: #e9e9e9;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

/* --- チャットコンテナ --- */
.chat-container {
    width: 100%;
    max-width: 450px;
    height: 95vh;
    max-height: 800px;
    display: flex;
    flex-direction: column;
    background-color: var(--line-bg-color);
    border-radius: 16px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    overflow: hidden;
}

/* --- ヘッダー --- */
.chat-header {
    padding: 10px 15px;
    background-color: var(--header-bg-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #dcdcdc;
    flex-shrink: 0;
}
.friend-info { display: flex; align-items: center; }
.friend-icon { font-size: 36px; color: #5c5c5c; margin-right: 10px; }
.friend-name { font-weight: bold; }
#clear-history-btn { background: none; border: none; font-size: 18px; color: #888; cursor: pointer; }

/* --- チャットウィンドウ --- */
.chat-window {
    flex-grow: 1;
    padding: 20px 10px;
    overflow-y: auto;
}

/* --- メッセージ共通 --- */
.message-row {
    display: flex;
    margin-bottom: 15px;
    align-items: flex-start;
}
.message-bubble {
    padding: 10px 15px;
    border-radius: 18px;
    max-width: 70%;
    line-height: 1.5;
    word-wrap: break-word;
}

/* --- 相手 (AI) のメッセージ --- */
.ai-message .message-bubble {
    background-color: var(--friend-bubble-color);
    color: var(--text-color);
    border-top-left-radius: 0;
}
.ai-icon { font-size: 32px; color: #5c5c5c; margin-right: 8px; }

/* --- 自分 (User) のメッセージ --- */
.user-message {
    justify-content: flex-end; /* 右寄せ */
}
.user-message .message-bubble {
    background-color: var(--my-bubble-color);
    color: var(--text-color);
    border-top-right-radius: 0;
}

/* --- 入力エリア --- */
.chat-input-area {
    display: flex;
    padding: 10px;
    background-color: var(--header-bg-color);
    border-top: 1px solid #dcdcdc;
    flex-shrink: 0;
}
#message-input {
    flex-grow: 1;
    border: none;
    padding: 10px 15px;
    border-radius: 20px;
    margin-right: 10px;
    font-size: 16px;
}
#message-input:focus { outline: none; }
#send-btn {
    background-color: var(--my-bubble-color);
    border: none;
    color: var(--text-color);
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
    flex-shrink: 0;
}

/* --- プロフィールモーダル --- */
.modal-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}
.modal-content {
    background: white;
    padding: 30px;
    border-radius: 8px;
    width: 90%;
    max-width: 400px;
    text-align: center;
}
/* ▼▼▼ このセレクタに textarea を追加し、font-family を指定 ▼▼▼ */
.modal-content input, .modal-content select, .modal-content textarea, .modal-content button {
    display: block; width: 95%; padding: 12px; margin: 10px auto; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}
.modal-content button { background-color: #007bff; color: white; cursor: pointer; border: none; }
.modal-content p { color: #666; font-size: 14px; }

/* ▼▼▼ このスタイルを末尾に追加 ▼▼▼ */
.modal-content textarea {
    resize: vertical; /* 縦方向のみリサイズ可能にする */
    min-height: 80px; /* 最低限の高さを確保 */
}

/* --- ローディングスピナー --- */
#loading {
    position: absolute;
    bottom: 60px; /* Adjust as needed */
    left: 10px;
    display: flex;
    align-items: center;
}
.spinner {
    border: 4px solid rgba(0,0,0,0.1);
    border-left-color: #ffffff;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spin 1s linear infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

.hidden { display: none; }
